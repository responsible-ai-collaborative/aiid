const config = require('../config');

const namespace = 'AILD';

const taxonomyDefinition = {
    namespace,
    field_list: [
        {
            short_name: 'Record Number',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'int',
            mongo_type: 'int',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Caption',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Brief Description',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Area of Application List',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'list',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Cause of Action List',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'list',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Issue List',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'list',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Name of Algorithm List',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'list',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Class Action List',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'list',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Organizations involved',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'list',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Jurisdiction Filed',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'string',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Date Action Filed',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'date',
            mongo_type: 'date',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Published Opinions',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'bool',
            mongo_type: 'bool',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Status Disposition',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'multi',
            mongo_type: 'array',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Date Added',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'date',
            mongo_type: 'date',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Last Update',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'date',
            mongo_type: 'date',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Progress Notes',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Researcher',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Summary of Significance',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Summary Facts Activity to Date',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Most Recent Activity',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Most Recent Activity Date',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'date',
            mongo_type: 'date',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
        {
            short_name: 'Keyword',
            long_name: '',
            short_description: '',
            long_description: '',
            display_type: 'text',
            mongo_type: 'string',
            complete_from: {},
            default: '',
            placeholder: '',
            permitted_values: [],
            weight: 50,
            instant_facet: false,
            required: false,
            public: true,
        },
    ]
}

/**
 *
 * @param {{context: {client: import('mongodb').MongoClient}}} context
 */

exports.up = async ({ context: { client } }) => {
    await client.connect();

    const taxaCollection = client
        .db(config.realm.production_db.db_name)
        .collection('taxa');

    const existingDocument = await taxaCollection.findOne({ namespace });

    if (!existingDocument) {
        const result = await taxaCollection.insertOne(taxonomyDefinition);
        console.log(`${result.insertedId} document inserted`);
    } else {
        console.log(`Document with namespace ${namespace} already exists`);
    }
}